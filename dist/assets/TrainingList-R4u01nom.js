import{j as s,r as i}from"./index-Dn7xk2-6.js";function u(n){const r=String(n).toUpperCase();return r==="COMPLETED"?{bg:"#22c55e",fg:"#fff"}:r==="IN_PROGRESS"?{bg:"#3b82f6",fg:"#fff"}:r==="OVERDUE"?{bg:"#ef4444",fg:"#fff"}:{bg:"#f59e0b",fg:"#fff"}}function f({status:n}){const r=String(n||"").toUpperCase()||"PENDING",a=u(r),e=r==="IN_PROGRESS"?"In-Progress":r.charAt(0)+r.slice(1).toLowerCase();return s.jsx("span",{className:"badge",style:{background:a.bg,color:a.fg},children:e})}function p(n){if(!n)return"-";const r=n instanceof Date?n:new Date(n);return Number.isNaN(r.getTime())?String(n):r.toLocaleString()}function g(n){if(!Number.isFinite(n)||n<0)return"-";const r=Math.floor(n/1e3),a=Math.floor(r/3600),e=Math.floor(r%3600/60);return`${a}h ${String(e).padStart(2,"0")}m`}function b({item:n,canUpdate:r,onStart:a,onComplete:e}){const o=String((n==null?void 0:n.status)||"").toUpperCase(),c=i.useMemo(()=>{const t=n!=null&&n.start_time?new Date(n.start_time):null,d=n!=null&&n.completion_time?new Date(n.completion_time):null;return t&&!Number.isNaN(t.getTime())&&d&&!Number.isNaN(d.getTime())?g(d.getTime()-t.getTime()):"-"},[n]),l=o==="COMPLETED"?"4px solid #22c55e":o==="OVERDUE"?"4px solid #ef4444":o==="IN_PROGRESS"?"4px solid #3b82f6":"4px solid #f59e0b";return s.jsxs("div",{className:"card",style:{background:"#fff",border:"1px solid var(--gray-200)",borderLeft:l},children:[s.jsxs("div",{className:"row",style:{gap:10,alignItems:"flex-start",flexWrap:"wrap"},children:[s.jsxs("div",{style:{flex:1,minWidth:220},children:[s.jsx("div",{style:{fontWeight:700},children:(n==null?void 0:n.training_name)||(n==null?void 0:n.training_id)}),s.jsx("div",{className:"small",style:{color:"var(--gray-500)",marginTop:2},children:(n==null?void 0:n.department)||"-"}),n!=null&&n.description?s.jsx("div",{className:"small",style:{marginTop:8,whiteSpace:"pre-wrap"},children:n.description}):null,s.jsxs("div",{style:{marginTop:10,display:"flex",gap:8,flexWrap:"wrap"},children:[s.jsx(f,{status:n==null?void 0:n.status}),s.jsxs("span",{className:"badge",children:["Due: ",p(n==null?void 0:n.due_date)]}),s.jsxs("span",{className:"badge",children:["Time: ",c]})]})]}),s.jsxs("div",{className:"action-grid",style:{minWidth:220},children:[n!=null&&n.video_link?s.jsx("button",{className:"button",type:"button",onClick:()=>window.open(n.video_link,"_blank","noopener,noreferrer"),children:"Open Video"}):null,Array.isArray(n==null?void 0:n.documents)&&n.documents.length?s.jsx("button",{className:"button",type:"button",onClick:()=>window.open(String(n.documents[0]||""),"_blank","noopener,noreferrer"),children:"Open Document"}):null,s.jsx("button",{className:"button",type:"button",disabled:!r,onClick:()=>a&&a(n),children:o==="IN_PROGRESS"?"Resume":"Start"}),s.jsx("button",{className:"button primary",type:"button",disabled:!r,onClick:()=>e&&e(n),children:"Mark Complete"})]})]}),Array.isArray(n==null?void 0:n.documents)&&n.documents.length>1?s.jsxs("div",{style:{marginTop:10},children:[s.jsx("div",{className:"small",style:{fontWeight:700,marginBottom:6},children:"Documents"}),s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:n.documents.filter(Boolean).map(t=>s.jsx("button",{className:"button",type:"button",onClick:()=>window.open(String(t),"_blank","noopener,noreferrer"),children:"Open"},t))})]}):null]})}function h({items:n,loading:r,canUpdate:a,onStart:e,onComplete:o}){const c=Array.isArray(n)?n:[];return r?s.jsx("div",{className:"small",children:"Loading trainingsâ€¦"}):c.length?s.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10},children:c.map(l=>s.jsx(b,{item:l,canUpdate:!!a,onStart:e,onComplete:o},l.assigned_id||`${l.candidate_id}:${l.training_id}`))}):s.jsx("div",{className:"small",children:"No trainings assigned."})}export{h as T};
